{"ast":null,"code":"var _jsxFileName = \"/Users/cgiaramani/AEM-projects/to-do-mine/frontend/src/pages/Root.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { AuthContextProvider } from \"../store/auth-context\";\nimport Dashboard from \"../components/Dashboard\";\nimport Header from \"../components/Header\";\nimport { Outlet, useLoaderData, useSubmit } from \"react-router-dom\";\nimport { getTokenDuration } from '../utils/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Root = () => {\n  _s();\n  const token = useLoaderData();\n  const submit = useSubmit();\n  const [name, setName] = useState(\"\"); // = \"CHRIS\";\n\n  useEffect(() => {\n    if (!token) {\n      return;\n    }\n    if (token === 'EXPIRED') {\n      submit(null, {\n        action: '/login',\n        method: 'post'\n      });\n      return;\n    }\n    const tokenDuration = getTokenDuration();\n    console.log(tokenDuration);\n    setTimeout(() => {\n      submit(null, {\n        action: '/login',\n        method: 'post'\n      });\n      localStorage.removeItem('token');\n      localStorage.removeItem('token');\n      localStorage.removeItem('token');\n    }, tokenDuration);\n    setName(localStorage.getItem('name'));\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      name: name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(Root, \"Oaa4h4BVifNBnepp6FBeKwGDxys=\", false, function () {\n  return [useLoaderData, useSubmit];\n});\n_c = Root;\nexport default Root;\nvar _c;\n$RefreshReg$(_c, \"Root\");","map":{"version":3,"names":["React","useEffect","useState","DndProvider","HTML5Backend","AuthContextProvider","Dashboard","Header","Outlet","useLoaderData","useSubmit","getTokenDuration","Root","token","submit","name","setName","action","method","tokenDuration","console","log","setTimeout","localStorage","removeItem","getItem"],"sources":["/Users/cgiaramani/AEM-projects/to-do-mine/frontend/src/pages/Root.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { AuthContextProvider } from \"../store/auth-context\";\nimport Dashboard from \"../components/Dashboard\";\nimport Header from \"../components/Header\";\nimport { Outlet, useLoaderData, useSubmit } from \"react-router-dom\";\nimport { getTokenDuration } from '../utils/auth';\n\nconst Root = () => {\n    const token = useLoaderData();\n    const submit = useSubmit();\n    const [name, setName] = useState(\"\"); // = \"CHRIS\";\n\n    useEffect(() => {\n        if(!token) {\n            return;\n        }\n\n        if(token === 'EXPIRED') {\n            submit(null, { action: '/login', method: 'post'});\n            return;\n        }\n\n        const tokenDuration = getTokenDuration();\n        console.log(tokenDuration);\n    \n        setTimeout(() => {\n          submit(null, { action: '/login', method: 'post' });\n          localStorage.removeItem('token');\n          localStorage.removeItem('token');\n          localStorage.removeItem('token');\n        }, tokenDuration);\n\n        setName(localStorage.getItem('name'));\n    })\n\n    return (\n        <>\n            <Header name={name}/>\n            <Outlet />\n        </>\n    )\n}\n\nexport default Root"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,WAAW;AACvC,SAASC,YAAY,QAAQ,yBAAyB;AACtD,SAASC,mBAAmB,QAAQ,uBAAuB;AAC3D,OAAOC,SAAS,MAAM,yBAAyB;AAC/C,OAAOC,MAAM,MAAM,sBAAsB;AACzC,SAASC,MAAM,EAAEC,aAAa,EAAEC,SAAS,QAAQ,kBAAkB;AACnE,SAASC,gBAAgB,QAAQ,eAAe;AAAC;AAAA;AAEjD,MAAMC,IAAI,GAAG,MAAM;EAAA;EACf,MAAMC,KAAK,GAAGJ,aAAa,EAAE;EAC7B,MAAMK,MAAM,GAAGJ,SAAS,EAAE;EAC1B,MAAM,CAACK,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;;EAEtCD,SAAS,CAAC,MAAM;IACZ,IAAG,CAACY,KAAK,EAAE;MACP;IACJ;IAEA,IAAGA,KAAK,KAAK,SAAS,EAAE;MACpBC,MAAM,CAAC,IAAI,EAAE;QAAEG,MAAM,EAAE,QAAQ;QAAEC,MAAM,EAAE;MAAM,CAAC,CAAC;MACjD;IACJ;IAEA,MAAMC,aAAa,GAAGR,gBAAgB,EAAE;IACxCS,OAAO,CAACC,GAAG,CAACF,aAAa,CAAC;IAE1BG,UAAU,CAAC,MAAM;MACfR,MAAM,CAAC,IAAI,EAAE;QAAEG,MAAM,EAAE,QAAQ;QAAEC,MAAM,EAAE;MAAO,CAAC,CAAC;MAClDK,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;MAChCD,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;MAChCD,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;IAClC,CAAC,EAAEL,aAAa,CAAC;IAEjBH,OAAO,CAACO,YAAY,CAACE,OAAO,CAAC,MAAM,CAAC,CAAC;EACzC,CAAC,CAAC;EAEF,oBACI;IAAA,wBACI,QAAC,MAAM;MAAC,IAAI,EAAEV;IAAK;MAAA;MAAA;MAAA;IAAA,QAAE,eACrB,QAAC,MAAM;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA,gBACX;AAEX,CAAC;AAAA,GAlCKH,IAAI;EAAA,QACQH,aAAa,EACZC,SAAS;AAAA;AAAA,KAFtBE,IAAI;AAoCV,eAAeA,IAAI;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}